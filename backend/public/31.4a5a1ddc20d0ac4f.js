"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[31],{7031:(T,u,c)=>{c.r(u),c.d(u,{CatalogueModule:()=>O});var i=c(9808),d=c(5271),t=c(1223),a=c(520),p=c(262),g=c(2843),f=c(2340);let h=(()=>{class o{constructor(r){this.http=r}getProducts(){let r=new a.WM;return r.append("Content-Type","application/json"),this.http.get(f.N.api_url+"/products",{headers:r}).pipe((0,p.K)(this.errorHandler))}errorHandler(r){return(0,g._)(r)}}return o.\u0275fac=function(r){return new(r||o)(t.LFG(a.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var m=c(4383),v=c(6854);function x(o,s){if(1&o){const r=t.EpF();t.TgZ(0,"a",14),t.NdJ("click",function(){t.CHM(r);const n=t.oxw().$implicit;return t.oxw().order(n._id)}),t._uU(1,"Order it"),t.qZA()}}function C(o,s){1&o&&(t.TgZ(0,"a",15),t._uU(1,"Ordered"),t.qZA())}function P(o,s){if(1&o&&(t.TgZ(0,"div",4)(1,"div",5),t._UZ(2,"img",6),t.TgZ(3,"div",7)(4,"div",8)(5,"h5",9),t._uU(6),t.qZA(),t.TgZ(7,"h5",10),t._uU(8),t.qZA()(),t.TgZ(9,"p",11),t._uU(10),t.qZA(),t.YNc(11,x,2,0,"a",12),t.YNc(12,C,2,0,"a",13),t.qZA()()()),2&o){const r=s.$implicit,e=t.oxw();t.xp6(2),t.Q6J("src",r.image,t.LSH),t.xp6(4),t.Oqu(r.name),t.xp6(2),t.Oqu(r.price),t.xp6(2),t.hij(" ",r.desc," "),t.xp6(1),t.Q6J("ngIf",!e.isOrdered(r._id)),t.xp6(1),t.Q6J("ngIf",e.isOrdered(r._id))}}function y(o,s){1&o&&(t.TgZ(0,"div",16)(1,"div",17)(2,"div",18)(3,"span",19),t._uU(4,"Loading..."),t.qZA()()()())}const Z=[{path:"",component:(()=>{class o{constructor(r,e,n,l){this.productService=r,this.toastr=e,this.orderService=n,this.router=l,this.products=[],this.orders=new Set,this.fetchingProducts=!1}ngOnInit(){this.products=[],this.getOrders(),this.getProducts()}isOrdered(r){return this.orders.has(r)}getOrders(){this.orderService.getOrders().subscribe(r=>{if(r)for(let e=0;e<r.length;e++)r[e].product&&this.orders.add(r[e].product._id)})}getProducts(){this.fetchingProducts=!0,this.productService.getProducts().subscribe(r=>{this.fetchingProducts=!1,this.products=r},r=>{this.toastr.error(r.error,"Error"),this.fetchingProducts=!1})}order(r){const e={email:localStorage.getItem("email"),prodId:r};this.orderService.order(e).subscribe(n=>{this.toastr.success("Ordered Successfully!!","Success"),this.router.navigate(["/orders"])},n=>{this.toastr.error(n.error,"Error")})}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(h),t.Y36(m._W),t.Y36(v.p),t.Y36(d.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-products"]],decls:4,vars:2,consts:[[1,"container","px-3","py-5"],[1,"row","m-0"],["class","col-12 col-md-4 col-md-3",4,"ngFor","ngForOf"],["class","col-12",4,"ngIf"],[1,"col-12","col-md-4","col-md-3"],[1,"card",2,"width","100%"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"d-flex","justify-content-between"],[1,"card-title"],[1,"text-lead"],[1,"card-text"],["class","btn btn-outline-dark",3,"routerLink","click",4,"ngIf"],["class","btn btn-success disabled","disabled","true",3,"routerLink",4,"ngIf"],[1,"btn","btn-outline-dark",3,"routerLink","click"],["disabled","true",1,"btn","btn-success","disabled",3,"routerLink"],[1,"col-12"],[1,"w-100","d-flex","justify-content-center"],["role","status",1,"spinner-border","text-dark"],[1,"visually-hidden"]],template:function(r,e){1&r&&(t.TgZ(0,"div",0)(1,"div",1),t.YNc(2,P,13,6,"div",2),t.YNc(3,y,5,0,"div",3),t.qZA()()),2&r&&(t.xp6(2),t.Q6J("ngForOf",e.products),t.xp6(1),t.Q6J("ngIf",e.fetchingProducts))},directives:[i.sg,i.O5,d.yS],styles:[""]}),o})()}];let S=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[d.Bz.forChild(Z)],d.Bz]}),o})(),O=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[i.ez,S]]}),o})()}}]);